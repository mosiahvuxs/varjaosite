<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">
<h:head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/main.css"/>
<link rel="stylesheet" type="text/css" media="all" href="#{facesContext.externalContext.requestContextPath}/css/media.css"/>
<script src="#{facesContext.externalContext.requestContextPath}/scripts/jquery.js" type="text/javascript"></script>
<script src="#{facesContext.externalContext.requestContextPath}/scripts/jquery.maskedinput.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(function($){
   $(".data-publicacao").mask("99/99/9999");
   });
</script>
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="#{facesContext.externalContext.requestContextPath}/scripts/scroll-remove-listagem.js"></script>
<script src="#{facesContext.externalContext.requestContextPath}/scripts/submenu-quem-somos.js"></script>
<script src="#{facesContext.externalContext.requestContextPath}/scripts/submenu-atuacao.js"></script>
<script src="#{facesContext.externalContext.requestContextPath}/scripts/submenu-clientes.js"></script>
<script src="#{facesContext.externalContext.requestContextPath}/scripts/ampliar-reduzir.js"></script>
<script src="#{facesContext.externalContext.requestContextPath}/scripts/ampliar-reduzir-impresso.js"></script>
<script type="text/javascript" src="mediaplayer/wmv/silverlight.js"></script> 
<script type="text/javascript" src="mediaplayer/wmv/wmvplayer.js"></script>

<title>Varjão - Clipping</title>
</h:head>

<body>

<h:form prependId="false" id="formPesquisa">

<p:growl showDetail="true" sticky="false" life="3600" showSummary="false"/>

<div class="site-wrapper"> 
  <!--INÍCIO DO INCLUDE NA ÁREA DE CLIPPING COM USUÁRIO AUTENTICADO-->
  <div class="barra-topo"></div>
  <div class="sombra-topo-wrapper">
    <div class="sombra-topo-esquerda"></div>
    <div class="sombra-topo-direita"></div>
  </div>
  <div class="header">
    <div class="logo"><a href="#{facesContext.externalContext.requestContextPath}/"><img src="#{facesContext.externalContext.requestContextPath}/images/logo.png" border="0"/></a></div>
    <menu>
    <div class="menu-wrapper">
      <div class="item-menu"><a href="#{facesContext.externalContext.requestContextPath}/">HOME</a></div>
      <div class="item-menu-quem-somos"><a href="#">QUEM SOMOS</a></div>
      <div class="item-menu-atuacao"><a href="#">ATUAÇÃO</a></div>
      <div class="item-menu-clientes"><a href="#">CLIENTES</a></div>
      <div class="item-menu"><a href="portifolio.xhtml">PORTFÓLIO</a></div>
      <div class="item-menu"><a href="contato.xhtml">CONTATO</a></div>
      <h:panelGroup rendered="#{empty sessionScope.usuarioConectado.id}">
      <div class="item-menu"><a href="login.xhtml">LOGIN</a></div>
      </h:panelGroup>
      <h:panelGroup rendered="#{!empty sessionScope.usuarioConectado.id}">
      <div class="item-menu">
      	<h:commandLink value="SAIR" action="#{loginFaces.sair}"/>
      </div>
      </h:panelGroup>
    </div>
    </menu>
    <div class="submenu-quem-somos">
      <div class="submenu-wrapper-1">
        <div class="barra-divisoria-azul"></div>
        <div class="item-submenu"><a href="historia.xhtml">HISTÓRIA</a></div>
        <div class="barra-divisoria-azul"></div>
        <div class="item-submenu"><a href="diretoria.xhtml">DIRETORIA</a></div>
        <div class="barra-divisoria-azul"></div>
      </div>
    </div>
    <div class="submenu-atuacao">
      <div class="submenu-wrapper-2">
        <div class="barra-divisoria-azul"></div>
        <div class="item-submenu"><a href="comunicacao.xhtml">COMUNICAÇÃO INTEGRADA</a></div>
        <div class="barra-divisoria-azul"></div>
        <div class="item-submenu"><a href="clipping_monitoramento.xhtml">CLIPPING E MONITORAMENTO</a></div>
        <div class="barra-divisoria-azul"></div>
      </div>
    </div>
    <div class="submenu-clientes">
      <div class="submenu-wrapper-3">
        <div class="barra-divisoria-azul"></div>
        <div class="item-submenu"><a href="cases.xhtml">CASES DE SUCESSO</a></div>
        <div class="barra-divisoria-azul"></div>
        <div class="item-submenu"><a href="clientes.xhtml">CLIENTES DO GRUPO</a></div>
        <div class="barra-divisoria-azul"></div>
        <div class="item-submenu"><a href="clientes-atendidos.xhtml">CLIENTES ATENDIDOS</a></div>
        <div class="barra-divisoria-azul"></div>
      </div>
    </div>
    <div class="sombra-wrapper-submenu">
      <div class="sombra-esquerda-submenu"></div>
      <div class="sombra-direita-submenu"></div>
    </div>
  </div>
  <div class="clear"></div>
  <div class="widget-header" style="margin-top: 0;">
    <div class="widget-clipping">
      <div class="widget-content">
        <div class="widget-icon"><img src="#{facesContext.externalContext.requestContextPath}/images/widget-clipping.png" border="0"/></div>
        <div class="widget-item">CLIPPING</div>
        <div class="widget-arrow"><img src="#{facesContext.externalContext.requestContextPath}/images/arrow.png" border="0"/></div>
      </div>
      	
      	<p:outputPanel id="otpPesquisa">
		
		<div class="busca-avancada-wrapper">
  		
  		<div class="field-container">
          <div class="field-wrapper">
            <div class="radio-btn"></div>
            <h:inputText value="#{clippingFaces.dataInicial}" id="dataPublicacaoInicial" styleClass="data-publicacao"/>
          </div>
          <div class="clear"></div>
          <div class="field-wrapper">
            <div class="radio-btn"></div>
            <h:inputText value="#{clippingFaces.dataFinal}" id="dataPublicacaoFinal" styleClass="data-publicacao"/>
          </div>
        </div>
        <div class="field-container">
          <div class="field-wrapper">
            <div class="radio-btn"></div>
            <h:inputText value="#{clippingFaces.midiaEnvio.midia.chamada}" id="chamada" styleClass="chamada"/>
          </div>
          <div class="clear"></div>
          <div class="field-wrapper">
            <div class="radio-btn"></div>
            <h:inputText value="#{clippingFaces.midiaEnvio.midia.titulo}" id="titulo" styleClass="chamada"/>
          </div>
        </div>
        <div class="field-container">
          <div class="field-wrapper">
            <div class="radio-btn"></div>
            <h:selectOneMenu value="#{clippingFaces.midiaEnvio.midia.tipoMidia.id}" styleClass="veiculo">
	      		<f:selectItem itemLabel="VEÍCULO"/>
	      		<f:selectItem itemLabel="IMPRESSO" itemValue="3"/>
	      		<f:selectItem itemLabel="RÁDIO" itemValue="1"/>
	      		<f:selectItem itemLabel="TV" itemValue="2"/>
	      		<f:selectItem itemLabel="WEB" itemValue="4"/>
	      	</h:selectOneMenu>
          </div>
          <div class="clear"></div>
          <div class="field-wrapper">
            <div class="radio-btn"></div>
            <h:selectOneMenu value="#{clippingFaces.midiaEnvio.midia.avaliacao.id}" styleClass="veiculo">
	      		<f:selectItem itemLabel="AVALIAÇÃO"/>
	      		<f:selectItem itemLabel="NEUTRA" itemValue="1"/>
	      		<f:selectItem itemLabel="POSITIVA" itemValue="2"/>
	      		<f:selectItem itemLabel="NEGATIVA" itemValue="3"/>
	      		<f:selectItem itemLabel="CONCORRÊNCIA" itemValue="4"/>
	      		<f:selectItem itemLabel="CONHECIMENTO" itemValue="5"/>
	      	</h:selectOneMenu>
          </div>
        </div>
        
        <script type="text/javascript">
	         $('#dataPublicacaoInicial').attr('placeholder','DATA INICIAL');
	    </script>
	    <script type="text/javascript">
	         $('#dataPublicacaoFinal').attr('placeholder','DATA FINAL');
	    </script>
	    <script type="text/javascript">
	         $('#chamada').attr('placeholder','CHAMADA');
	    </script>
	    <script type="text/javascript">
	         $('#titulo').attr('placeholder','TÍTULO');
	    </script>

	    <h:commandButton action="#{clippingFaces.findEvent}" value="pesquisar" styleClass="botao-pesquisar"/>
		
		</div>
		
        </p:outputPanel>
      
      <div class="bem-vindo-wrapper">
        <div class="bem-vindo">Olá,</div>
        <div class="nome-usuario">${sessionScope.usuarioConectado.nome}</div>
        <div class="icone-bem-vindo"></div>
      </div>
      
    </div>
    
  </div>
  
  <div class="sombra-wrapper">
    <div class="sombra-esquerda"></div>
    <div class="sombra-direita"></div>
  </div>
  	
  	<div class="content-clipping-wrapper"> 

    <div class="left-box">
    
      <div class="box-arrow"></div>
      
      <div class="box-menu">
      
        <div class="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==null ? 'item-menu-box-selected' : 'item-menu-box'}">
        <h:commandLink value="TODAS" action="#{clippingFaces.findEvent}" >
        	<f:setPropertyActionListener target="#{clippingFaces.midiaEnvio.midia.tipoMidia.id}" value="#{null}" />
        </h:commandLink>
        </div>
        
        <div class="menu-box-bar"></div>
        
        <div class="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==3 ? 'item-menu-box-selected' : 'item-menu-box'}">
        <h:commandLink value="IMPRESSO" action="#{clippingFaces.findEvent}" style="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==3 ? 'text-decoration: none; color: #fff;' : ''}">
        	<f:setPropertyActionListener target="#{clippingFaces.midiaEnvio.midia.tipoMidia.id}" value="3" />
        </h:commandLink>
        </div>
        
        <div class="menu-box-bar"></div>
        
        <div class="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==1 ? 'item-menu-box-selected' : 'item-menu-box'}">
        <h:commandLink value="RÁDIO" action="#{clippingFaces.findEvent}" style="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==1 ? 'text-decoration: none; color: #fff;' : ''}">
        	<f:setPropertyActionListener target="#{clippingFaces.midiaEnvio.midia.tipoMidia.id}" value="1" />
        </h:commandLink>
        </div>
        
        <div class="menu-box-bar"></div>
        
        <div class="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==2 ? 'item-menu-box-selected' : 'item-menu-box'}">
        <h:commandLink value="TV" action="#{clippingFaces.findEvent}" style="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==2 ? 'text-decoration: none; color: #fff;' : ''}">
        	<f:setPropertyActionListener target="#{clippingFaces.midiaEnvio.midia.tipoMidia.id}" value="2" />
        </h:commandLink>
        </div>

		<div class="menu-box-bar"></div>

        <div class="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==4 ? 'item-menu-box-selected' : 'item-menu-box'}">
        <h:commandLink value="WEB" action="#{clippingFaces.findEvent}" style="#{clippingFaces.midiaEnvio.midia.tipoMidia.id==4 ? 'text-decoration: none; color: #fff;' : ''}">
        	<f:setPropertyActionListener target="#{clippingFaces.midiaEnvio.midia.tipoMidia.id}" value="4" />
        </h:commandLink>
        </div>
        
      </div>
      
    </div>
    
    <div class="clipping-listagem-wrapper">
    
    <ui:repeat var="item" value="#{clippingFaces.midias}" varStatus="var">
    	
   		<div class="clipping-chamada-wrapper">
		  <div class="texto-wrapper">
		    <div class="clipping-chamada">
		    	#{item.titulo}
        	</div>
		    <div class="clipping-descricao">
		    	Publicado em: <h:outputText value="#{item.data}"><f:convertDateTime type="date" pattern="dd/MM/yyyy"/></h:outputText>, #{item.secao.veiculo.descricao}, #{item.secao.descricao}
		    	<h:panelGroup rendered="#{!empty item.impresso.numeroPagina}">, Pag. #{item.impresso.numeroPagina}</h:panelGroup>
		    	<h:panelGroup rendered="#{item.tipoMidia.id==1}">Duração: #{item.audio.duracao}</h:panelGroup>
		    	<h:panelGroup rendered="#{item.tipoMidia.id==2}">Duração: #{item.video.duracao}</h:panelGroup>
		    </div>
		  </div>
		  <div class="botao-salvar-clipping">
		  	<h:commandLink value="Salvar" action="#{clippingFaces.download}" rendered="#{item.tipoMidia.id!=4}">
		  		<f:setPropertyActionListener target="#{clippingFaces.midia}" value="#{item}" />
		  	</h:commandLink>
		  	<h:commandLink value="Salvar" action="#{clippingFaces.gerarPdf}" rendered="#{item.tipoMidia.id==4}">
		  		<f:setPropertyActionListener target="#{clippingFaces.midia}" value="#{item}" />
		  	</h:commandLink>
		  </div>
		  <div class="icone-aval">
		  	<h:panelGroup rendered="#{item.avaliacao.id==1}">
		  		<h:graphicImage title="neutro" value="images/neutro.png" />
		  	</h:panelGroup>
		  	<h:panelGroup rendered="#{item.avaliacao.id==2}">
		  		<h:graphicImage title="positivo" value="images/positivo.png" />
		  	</h:panelGroup>
		  	<h:panelGroup rendered="#{item.avaliacao.id==3}">
		  		<h:graphicImage title="negativo" value="images/negativo.png" />
		  	</h:panelGroup>
		  	<h:panelGroup rendered="#{item.avaliacao.id==4}">
		  		<h:graphicImage title="concorrencia" value="images/concorrencia.png" />
		  	</h:panelGroup>
		  	<h:panelGroup rendered="#{item.avaliacao.id==5}">
		  		<h:graphicImage title="conhecimento" value="images/conhecimento.png"/>
		  	</h:panelGroup>
		  </div>
		  <div class="clear"></div>
		</div>

		<div class="clipping-content">
			<h:panelGroup rendered="#{item.tipoMidia.id==1 and item.arquivoEmDisco}">
				<audio controls="controls">
					<source src="#{item.arquivoFormatado}" type="audio/mpeg"/>
				</audio>
			</h:panelGroup>
		  	<h:panelGroup rendered="#{item.tipoMidia.id==2 and item.arquivoEmDisco}">
		  		<h:panelGroup rendered="#{!item.mp4}">
					<div id="mediaspace#{var.index+1}"></div>
					<script type="text/javascript"> 
					var cnt = document.getElementById("mediaspace#{var.index+1}"); 
					var src = "mediaplayer/wmv/wmvplayer.xaml"; 
					var cfg = {height:"250", width:"400", file:"#{item.arquivoFormatado}", autostart:"false"}; 
					var ply = new jeroenwijering.Player(cnt,src,cfg); 
					</script>  
				</h:panelGroup>
				<h:panelGroup rendered="#{item.mp4}">
					<video controls="controls" width="280" height="210">
						<source src="#{item.arquivoFormatado}" type="video/mp4"/>
					</video>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup rendered="#{item.tipoMidia.id==3}">
			 	<div class="imagem-clipping">
			 	<h:commandLink action="#{clippingFaces.actionListener}">
			 		<h:graphicImage value="#{item.arquivoFormatado}"/>
			 		<f:setPropertyActionListener target="#{clippingFaces.midia}" value="#{item}" />
			 	</h:commandLink>
			 	</div>
			 	<h:panelGroup rendered="#{item.arquivoEmDisco}">
			  		<div class="tarja-img">Clique na imagem para ampliar</div>
			  	</h:panelGroup>
		  	</h:panelGroup>
		  	<h:panelGroup rendered="#{item.tipoMidia.id==4}">
			 	<div class="web-content">
		          <h:outputText value="#{item.web.conteudo}" escape="false"/>
		          <div class="line-web"></div>
		          <h:panelGroup rendered="#{!empty item.web.url}">
		          	<div class="botao-ver-fonte"><a href="#{item.web.url}" target="_blank">Ver conteúdo na fonte</a></div>
		          </h:panelGroup>
		          <div class="clear"></div>
		        </div>
		  	</h:panelGroup>
		</div>

		<div class="line"></div>
      
      </ui:repeat>
      
    </div>
    
  </div>
  
  <div class="clear"></div>
  
  <div class="sombra-base"></div>
  
  <footer class="footer">
    <div class="endereco">Av. Tancredo Neves, 909, Ed. André Guimarães Business Center, Salas 1104 e 1105, CEP 41820-021, Salvador, Bahia, (71) 3444-6800, www.varjao.com</div>
  </footer>
  
</div>

</h:form>

</body>

</html>